---
title: "Langfuse"
description: "Send Langfuse traces to Respan with OTEL instrumentation."
---

<Accordion title="Set up Respan">
1. **Sign up** — Create an account at [platform.respan.ai](https://platform.respan.ai)
2. **Create an API key** — Generate one on the [API keys page](https://platform.respan.ai/platform/api/api-keys)
3. **Add credits or a provider key** — Add credits on the [Credits page](https://platform.respan.ai/platform/api/credits) or connect your own provider key on the [Integrations page](https://platform.respan.ai/platform/api/integrations)
</Accordion>

## What is Langfuse?

[Langfuse](https://langfuse.com/) is an open-source LLM observability platform. Use the Respan Langfuse instrumentor to redirect Langfuse traces to Respan without changing your Langfuse usage. You can keep using `@observe` and the Langfuse SDK as usual.

<Note>Instrument before importing Langfuse so the HTTP client is patched.</Note>

## Setup

<Steps>
<Step title="Install packages">

```bash
pip install langfuse respan-instrumentation-langfuse
```

</Step>

<Step title="Set environment variables">

```bash .env
RESPAN_API_KEY=your-respan-api-key
RESPAN_BASE_URL=https://api.respan.ai/api

LANGFUSE_PUBLIC_KEY=your-langfuse-public-key
LANGFUSE_SECRET_KEY=your-langfuse-secret-key
LANGFUSE_HOST=https://cloud.langfuse.com
```

</Step>

<Step title="Instrument and run">

```python
import dotenv
dotenv.load_dotenv(".env", override=True)

import os
from respan_instrumentation_langfuse import LangfuseInstrumentor

# Instrument BEFORE importing Langfuse
instrumentor = LangfuseInstrumentor()
instrumentor.instrument(
    api_key=os.environ["RESPAN_API_KEY"],
    endpoint=os.environ["RESPAN_BASE_URL"] + "/v1/traces/ingest",
)

from langfuse import Langfuse, observe

langfuse = Langfuse(
    public_key="pk-lf-...",
    secret_key="sk-lf-...",
    host="https://cloud.langfuse.com",
)

@observe()
def process_query(query: str):
    return f"Response to: {query}"

result = process_query("Hello World")
print(result)

langfuse.flush()
```

</Step>

<Step title="View your trace">

Open the [Traces page](https://platform.respan.ai/platform/traces) in the Respan dashboard.

<Frame className="rounded-md">
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/Integrations/Langfuse/basic_decorator.png" alt="Langfuse basic decorator tracing in Respan" />
</Frame>

</Step>
</Steps>

## Examples

### Generation tracing

Mark a function as a generation with `@observe(as_type="generation")`.

```python
import os
from respan_instrumentation_langfuse import LangfuseInstrumentor

instrumentor = LangfuseInstrumentor()
instrumentor.instrument(api_key=os.environ["RESPAN_API_KEY"])

from langfuse import Langfuse, observe

langfuse = Langfuse(public_key="pk-lf-...", secret_key="sk-lf-...")

@observe(as_type="generation")
def generate_response(prompt: str):
    return f"Generated: {prompt}"

result = generate_response("Write a poem")
print(result)
langfuse.flush()
```

<Frame className="rounded-md">
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/Integrations/Langfuse/generation-tracing.png" alt="Langfuse generation tracing in Respan" />
</Frame>

### Nested traces

Create parent-child relationships with nested `@observe` functions.

```python
import os
from respan_instrumentation_langfuse import LangfuseInstrumentor

instrumentor = LangfuseInstrumentor()
instrumentor.instrument(api_key=os.environ["RESPAN_API_KEY"])

from langfuse import Langfuse, observe

langfuse = Langfuse(public_key="pk-lf-...", secret_key="sk-lf-...")

@observe()
def subtask(name: str):
    return f"Completed: {name}"

@observe()
def main_workflow(task: str):
    result1 = subtask("step 1")
    result2 = subtask("step 2")
    return f"Workflow done: {task}"

result = main_workflow("Process request")
print(result)
langfuse.flush()
```

<Frame className="rounded-md">
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/Integrations/Langfuse/nested_traces.png" alt="Langfuse nested traces in Respan" />
</Frame>

## Observability

With this integration, Respan auto-captures:

- **Langfuse traces** -- every `@observe`-decorated function as a span
- **Generations** -- LLM calls marked with `as_type="generation"`
- **Nested spans** -- parent-child relationships
- **Errors** -- failed calls and error details

View traces on the [Traces page](https://platform.respan.ai/platform/traces).
