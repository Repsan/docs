---
title: "Anthropic"
description: "Route Anthropic model calls through Respan Gateway and track requests."
---

<Note> This section is for **Respan LLM gateway** users.</Note>

Use Respan Gateway to call Anthropic models while keeping unified observability (logs, cost, latency, and reliability metrics) in Respan.

## Prerequisites
- A **Respan API key**
- An **Anthropic API key** (BYOK)

<CardGroup cols={1}>
  <Card title="Get Anthropic API key" icon="key" href="https://console.anthropic.com/">
    Retrieve your API key from the Anthropic Console to begin integration.
  </Card>
</CardGroup>

## Supported SDKs / integrations

<AccordionGroup>
  <Accordion title="âœ… Supported Frameworks">
    - [OpenAI SDK](/integrations/gateway/openai/openai-sdk)
    - [LangChain SDK](/integrations/gateway/langchain) 
    - [Vercel/OpenAI](/integrations/gateway/vercel#openai)
    - [Vercel/Google](/integrations/gateway/vercel#google)
    - [LlamaIndex SDK](/integrations/gateway/llama-index)
    - [Google GenAI](/integrations/gateway/google_genai)
    - [Respan native (Otel)](/documentation/getting-started/quickstart/gateway)
    - [Anthropic SDK](/integrations/gateway/anthropic)
    - [Vercel/Anthropic](/integrations/gateway/vercel#anthropic)
  </Accordion>
</AccordionGroup>

## Configuration
There are 2 ways to add your Anthropic credentials to your requests:

### Via UI (Global)

<Steps>
  <Step title="Navigate to Providers">
    Go to the [Providers page](https://platform.respan.ai/platform/api/providers). This page allows you to manage credentials for over 20+ supported providers.
    <Frame>
      <img
        src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/settings/providers.jpg"
        alt="Respan Providers Page"
      />
    </Frame>
  </Step>

  <Step title="Add your Anthropic API Key">
    Select Anthropic and paste your API key.
    <Frame>
      <img
        height="200"
        width="300"
        src="/images/providers/anthropic.png"
        alt="Add Anthropic credentials"
      />
    </Frame>
  </Step>
</Steps>

### Via code (Per-Request)
You can pass credentials dynamically in the request body. This is useful if you need to use your users' own API keys (BYOK).

Add the `customer_credentials` parameter to your [Gateway request](/apis/develop/gateway/chat-completions):

```json
{
  // Rest of the request body
  "customer_credentials": {
    "anthropic": {
      "api_key": "YOUR_ANTHROPIC_API_KEY"
    }
  }
}
```

## Override credentials for a particular model (Optional)

One-off credential overrides. Instead of using what is uploaded for each provider, this targets credentials for individual models.

```json
{
  // Rest of the request body
  "customer_credentials": {
    "anthropic": {
      "api_key": "YOUR_ANTHROPIC_API_KEY"
    }
  },
  "credential_override": {
    "claude-3-5-sonnet-20240620": {
      "api_key": "ANOTHER_ANTHROPIC_API_KEY"
    }
  }
}
```

## Log Anthropic requests

Monitor your Anthropic Claude API calls by logging requests and responses asynchronously. Track metrics like cost, duration, and performance for all Claude models including Claude 3.5 Sonnet, Claude 3 Opus, and more.

```python Anthropic Python SDK
import requests

url = "https://api.respan.ai/api/request-logs/create/"
payload = {
    "model": "claude-3-5-sonnet-20240620",
    "prompt_messages": [
        {
            "role": "user",
            "content": "What's the weather like today?"
        }
    ],
    "completion_message": {
        "role": "assistant",
        "content": "I don't have access to real-time weather data, but I can help you find weather information."
    },
    "cost": 0.00042,
    "generation_time": 1.8,
    "customer_params": {
        "customer_identifier": "user_456"
    }
}
headers = {
    "Authorization": "Bearer YOUR_RESPAN_API_KEY",
    "Content-Type": "application/json"
}

response = requests.post(url, headers=headers, json=payload)
```

<Card title="Get Started with Logging" icon="rocket" href="/documentation/features/tracing/logs/quickstart"> Learn how to set up comprehensive logging for all your LLM requests </Card>

{/* Full request example
<Accordion title="Example"> <CodeGroup>
```python openai_example.py
from openai import OpenAI

client = OpenAI(
    base_url="https://api.respan.ai/api/",
    api_key="YOUR_RESPAN_API_KEY",
)

response = client.chat.completions.create(
    model="claude-3-5-sonnet-20240620",
    messages=[{"role": "user", "content": "Hello, how are you?"}],
import requests

def demo_call(
    input,
    model="claude-3-5-sonnet-20240620",
    token="YOUR_RESPAN_API_KEY",
):
    headers = {
        "Content-Type": "application/json",
        "Authorization": f"Bearer {token}",
    }

    data = {
        "model": model,
        "messages": [{"role": "user", "content": input}],
        "customer_credentials": {
            "anthropic": {
                "api_key": "YOUR_ANTHROPIC_API_KEY"
            }
        }
    }

    response = requests.post(
        "https://api.respan.ai/api/chat/completions",
        headers=headers,
        json=data,
    )
    return response

messages = "Say 'Hello World'"
print(demo_call(messages).json())
``` */}