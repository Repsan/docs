---
title: "Manual ingestion"
description: "Send traces to Respan via the OTLP endpoint or the JSON ingestion API."
---

<Accordion title="Set up Respan">
1. **Sign up** — Create an account at [platform.respan.ai](https://platform.respan.ai)
2. **Create an API key** — Generate one on the [API keys page](https://platform.respan.ai/platform/api/api-keys)
3. **Add credits or a provider key** — Add credits on the [Credits page](https://platform.respan.ai/platform/api/credits) or connect your own provider key on the [Integrations page](https://platform.respan.ai/platform/api/integrations)
</Accordion>


Use manual ingestion when you have existing log data, custom telemetry pipelines, or OpenTelemetry setups that need to send traces to Respan without using a framework SDK.

---

## OTLP endpoint

If you have an existing OpenTelemetry setup, send traces directly to Respan's OTLP-compatible endpoint. This works with any OpenTelemetry SDK or collector.

```
POST https://api.respan.ai/api/v2/traces
Authorization: Bearer {RESPAN_API_KEY}
Content-Type: application/json  (or application/x-protobuf)
```

### Environment variable configuration

```bash .env
OTEL_EXPORTER_OTLP_ENDPOINT="https://api.respan.ai/api"
OTEL_EXPORTER_OTLP_HEADERS="Authorization=Bearer YOUR_RESPAN_API_KEY"
OTEL_EXPORTER_OTLP_PROTOCOL="http/json"
```

### SDK configuration

<Tabs>
<Tab title="Python">
```python
from opentelemetry import trace
from opentelemetry.sdk.trace import TracerProvider
from opentelemetry.sdk.trace.export import BatchSpanProcessor
from opentelemetry.exporter.otlp.proto.http.trace_exporter import OTLPSpanExporter

exporter = OTLPSpanExporter(
    endpoint="https://api.respan.ai/api/v2/traces",
    headers={"Authorization": "Bearer YOUR_RESPAN_API_KEY"},
)

provider = TracerProvider()
provider.add_span_processor(BatchSpanProcessor(exporter))
trace.set_tracer_provider(provider)

tracer = trace.get_tracer("my-service")
with tracer.start_as_current_span("my-operation") as span:
    span.set_attribute("gen_ai.request.model", "gpt-4")
    # Your code here
```
</Tab>

<Tab title="JS/TS">
```typescript
import { NodeSDK } from '@opentelemetry/sdk-node';
import { OTLPTraceExporter } from '@opentelemetry/exporter-trace-otlp-http';

const exporter = new OTLPTraceExporter({
    url: 'https://api.respan.ai/api/v2/traces',
    headers: {
        'Authorization': 'Bearer YOUR_RESPAN_API_KEY',
    },
});

const sdk = new NodeSDK({
    traceExporter: exporter,
});

sdk.start();
```
</Tab>

<Tab title="cURL">
```bash
curl -X POST "https://api.respan.ai/api/v2/traces" \
  -H "Authorization: Bearer YOUR_RESPAN_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "resourceSpans": [{
      "resource": {
        "attributes": [
          {"key": "service.name", "value": {"stringValue": "my-service"}}
        ]
      },
      "scopeSpans": [{
        "scope": {"name": "manual"},
        "spans": [{
          "traceId": "0af7651916cd43dd8448eb211c80319c",
          "spanId": "b7ad6b7169203332",
          "name": "my-operation",
          "startTimeUnixNano": "1700000000000000000",
          "endTimeUnixNano": "1700000001000000000",
          "status": {"code": 1},
          "attributes": []
        }]
      }]
    }]
  }'
```
</Tab>
</Tabs>

Respan automatically parses OTel spans, extracts [Gen AI semantic conventions](https://opentelemetry.io/docs/specs/semconv/gen-ai/) and Respan-specific attributes, and maps them to the Respan data model. For the full OTLP schema and recognized attributes, see the [OTLP ingest API reference](/apis/observe/traces/otlp-ingest).

---

## Ingest API

<Tip>Example project: <a href="https://github.com/Repsan/respan-example-projects/tree/main/example_scripts/python/basic/logs_to_trace" target="_blank" rel="noopener noreferrer">Ingest traces example</a></Tip>

Construct traces by posting spans as JSON. Every span is a JSON object. Spans with the same `trace_unique_id` are grouped into a single trace. Parent-child relationships are defined via `span_parent_id`.

### Endpoint

```
POST {RESPAN_BASE_URL}/v1/traces/ingest
Authorization: Bearer {RESPAN_API_KEY}
```

### Span fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `trace_unique_id` | string | Yes | Groups spans into a single trace |
| `span_unique_id` | string | Yes | Unique ID for the span |
| `span_parent_id` | string | | Parent span ID; omit or `null` for root spans |
| `span_name` | string | | Name of the span (e.g. `"openai.chat"`) |
| `start_time` | string | | Span start time (RFC3339 UTC) |
| `timestamp` | string | | Span end time (RFC3339 UTC) |
| `model` | string | | Model used |
| `input` | string / object | | Span input data |
| `output` | string / object | | Span output data |
| `metadata` | object | | Custom key-value pairs |

For the full list, see [Span fields reference](/documentation/resources/reference/span-fields).

### Example

<CodeGroup>
```bash Bash
curl -X POST "$RESPAN_BASE_URL/v1/traces/ingest" \
  -H "Authorization: Bearer $RESPAN_API_KEY" \
  -H "Content-Type: application/json" \
  -d '[
    {
      "trace_unique_id": "a-trace-id",
      "span_unique_id": "root-span-id",
      "span_name": "workflow.start",
      "span_parent_id": null,
      "timestamp": "2025-09-08T07:46:14.007279Z",
      "start_time": "2025-09-08T07:46:14.007279Z"
    },
    {
      "trace_unique_id": "a-trace-id",
      "span_unique_id": "child-span-id",
      "span_name": "openai.chat",
      "span_parent_id": "root-span-id",
      "timestamp": "2025-09-08T07:46:19.041835Z",
      "start_time": "2025-09-08T07:46:18.037942Z"
    }
  ]'
```
```python Python
import os
import requests

BASE_URL = os.getenv("RESPAN_BASE_URL")
API_KEY = os.getenv("RESPAN_API_KEY")

payload = [
    {
        "trace_unique_id": "a-trace-id",
        "span_unique_id": "root-span-id",
        "span_name": "workflow.start",
        "span_parent_id": None,
        "timestamp": "2025-09-08T07:46:14.007279Z",
        "start_time": "2025-09-08T07:46:14.007279Z",
    },
    {
        "trace_unique_id": "a-trace-id",
        "span_unique_id": "child-span-id",
        "span_name": "openai.chat",
        "span_parent_id": "root-span-id",
        "timestamp": "2025-09-08T07:46:19.041835Z",
        "start_time": "2025-09-08T07:46:18.037942Z",
    },
]

resp = requests.post(
    f"{BASE_URL}/v1/traces/ingest",
    json=payload,
    headers={"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"},
)
print("Status:", resp.status_code)
print("Body:", resp.text)
```
```typescript TypeScript
const URL = `${process.env.RESPAN_BASE_URL}/v1/traces/ingest`;
const headers = {
  Authorization: `Bearer ${process.env.RESPAN_API_KEY}`,
  "Content-Type": "application/json",
};

const payload = [
  {
    trace_unique_id: "a-trace-id",
    span_unique_id: "root-span-id",
    span_name: "workflow.start",
    span_parent_id: null,
    timestamp: "2025-09-08T07:46:14.007279Z",
    start_time: "2025-09-08T07:46:14.007279Z",
  },
  {
    trace_unique_id: "a-trace-id",
    span_unique_id: "child-span-id",
    span_name: "openai.chat",
    span_parent_id: "root-span-id",
    timestamp: "2025-09-08T07:46:19.041835Z",
    start_time: "2025-09-08T07:46:18.037942Z",
  },
];

fetch(URL, { method: "POST", headers, body: JSON.stringify(payload) })
  .then((r) => r.json())
  .then((d) => console.log(d))
  .catch((e) => console.error(e));
```
</CodeGroup>
